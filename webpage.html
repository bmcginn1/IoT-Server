<!DOCTYPE html>
<html>
<title>Brian's IoT Webserver</title>
<head>
    <script src="/resources/jquery-3.3.1.js"></script>
    <script>
    var file = 0;
    var loadedTemps = 0;
    function update(){
      $.ajaxSetup({
        cache:false
      });
      $.getJSON("/resources/data.json", function(json){
        file = json;
      });
      var upTime = file['Uptime'];
      var tempC = file['Temperature C'];
      var tempF = file['Temperature F'];
      document.getElementById("upTime").innerHTML = upTime;
      document.getElementById("dateTime").innerHTML = file['DateTime'];
      document.getElementById("ip").innerHTML = file['IP'];
      document.getElementById("button1").innerHTML = file['Button1'];
      document.getElementById("button2").innerHTML = file['Button2'];
      document.getElementById("lastChange").innerHTML = file['LastChange'];
      document.getElementById("lastButton").innerHTML = file['LastButton'];
      document.getElementById("temperatureF").innerHTML = tempF;
      document.getElementById("temperatureC").innerHTML = tempC;
      document.getElementById("temperatureMin").innerHTML = file['TempMin'];
      document.getElementById("temperatureMax").innerHTML = file['TempMax'];
      updateTempHistory();
      var t = setTimeout(update, 100);
    }
    function updateTempHistory(){
      $.ajaxSetup({
        cache:false
      });
      $.getJSON("/resources/history.json", function(json){
        file = json;
      });
      var newDiv = document.createElement("div");
      var Temp = document.createTextNode("Temperature");
      newDiv.appendChild(Temp);
      document.body.appendChild(newDiv);
    }
  </script>
</head>
<body onload ="update()">
  <table>
    <tr>
        <th>System Date and Time</th>
        <td id="dateTime"/>
    </tr>
    <tr>
        <th>Uptime</th>
        <td id="upTime"/>
    </tr>
    <tr>
        <th>System IP Address</th>
        <td id="ip"/>
    </tr>
    <tr>
        <th>Button1</th>
        <td id="button1"/>
        <td> 1=on 0=off </td>
    </tr>
    <tr>
        <th>Button2</th>
        <td id="button2"/>
        <td> 1=on 0=off </td>
    </tr>
    <tr>
        <th>Last Button Press</th>
        <td id="lastButton"/>
        <td> occured at  </td>
        <td id="lastChange"/>
    </tr>
    <tr>
        <th>Temperature</th>
        <td id="temperatureF"/>
        <td> F </td>
    </tr>
    <tr>
	     <th>Temperature</th>
	     <td id = "temperatureC"/>
	     <td> C </td>
    </tr>
    <tr>
	     <th>Temperature Min</th>
	     <td id = "temperatureMin"/>
	     <td> F </td>
    </tr>
    <tr>
	     <th>Temperature Max</th>
	     <td id = "temperatureMax"/>
	     <td> F </td>
    </tr>

    <h1>Temperature History</h1>

  </table>
</body>
<html>
